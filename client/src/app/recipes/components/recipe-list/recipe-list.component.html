<ng-container
    [ngTemplateOutlet]="recipesList",
    [ngTemplateOutletContext]="{ $implicit: localState$ | async }"
></ng-container>

<ng-template #recipesList let-localState>
    <p>
        <br>Page: <span>{{localState.page}}</span>
        <br>Entries per page: {{localState.limit}}
        <br>Total results: {{localState.total}}
    </p>

    <ng-container *ngIf="localState.loading">
        Loading, please wait...
    </ng-container>

    <ng-container *ngIf="!localState.loading">

        <form class="filter-form" ngForm>
            <input class="filter-form-title-input" #filterByTitleInput="ngModel" [ngModel]="localState.filter?.title" type="text" name="title" placeholder="Filter results by title..." />
        </form>

        <section class="recipes-list" *ngIf="localState.recipes && localState.recipes?.length">

            <article class="recipe-thumb" *ngFor="let recipe of localState.recipes">
                <p>Title: {{recipe.title | uppercase}}</p>
                <p>Author: {{recipe.authorId}}</p>
                <p>Created: {{recipe.createdAt | date}}</p>
            </article>

        </section>
    
        <ng-container *ngIf="!localState.recipes || !localState.recipes?.length">
            No recipes to display.
        </ng-container>

    </ng-container>

</ng-template>
